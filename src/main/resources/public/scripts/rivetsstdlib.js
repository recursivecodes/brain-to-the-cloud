"use strict";!function(t,r){"object"==typeof exports?module.exports=r(require("rivets"),require("moment")):"function"==typeof define&&define.amd?define(["rivets","moment"],r):r(t.rivets,t.moment)}(this,function(t,r){t.stdlib={defaultPrecision:2,defaultThousandSeparator:"'",defaultDecimalSeparator:".",defaultDateFormat:"YYYY-MM-DD",defaultTimeFormat:"HH:mm:ss",defaultDatetimeFormat:"YYYY-MM-DD HH:mm:ss"},t.formatters.log=function(t){return console.log(t)},t.formatters.default=function(r,e){return t.formatters.isEmpty(r)?e:r},t.formatters.add=function(t,r){return t+r},t.formatters.sub=function(t,r){return t-r},t.formatters.map=function(t,r,e){var o=Array.prototype.slice.call(arguments);return o.splice(1,2),r[e].apply(r,o)},t.formatters.isBoolean=function(t){return"boolean"==typeof t},t.formatters.isNumeric=function(t){return!isNaN(t)},t.formatters.isNaN=function(r){return!!t.formatters.isArray(r)||isNaN(r)},t.formatters.isInteger=function(t){return t===+t&&t===(0|t)},t.formatters.isFloat=function(t){return 1/0!==t&&t===+t&&t!==(0|t)},t.formatters.isNumber=function(r){return t.formatters.isFloat(r)||t.formatters.isInteger(r)},t.formatters.isObject=function(r){return t.formatters.toBoolean(r)&&"object"==typeof r&&!t.formatters.isArray(r)},t.formatters.isFunction=function(t){return"function"==typeof t},t.formatters.isArray=function(r){return t.formatters.isFunction(Array.isArray)?Array.isArray(r):r instanceof Array},t.formatters.isString=function(t){return"string"==typeof t||t instanceof String},t.formatters.isInfinity=function(t){return t===1/0},t.formatters.toBoolean=function(t){return!!t},t.formatters.toInteger=function(t){var r=parseInt(1*t,10);return isNaN(r)?0:r},t.formatters.toFloat=function(t){var r=parseFloat(1*t);return isNaN(r)?0:r},t.formatters.toDecimal=function(r){var e=t.formatters.toInteger(1*r),o=t.formatters.toFloat(r);return e==o?e:o},t.formatters.toArray=function(r){return t.formatters.isArray(r)?r:t.formatters.isObject(r)?t.formatters.values(r):[r]},t.formatters.toString=function(t){return t?t.toString():""},t.formatters.integer={read:function(r){return t.formatters.toInteger(r)},publish:function(r){return t.formatters.toInteger(r)}},t.formatters.sum=function(t,r){return 1*t+1*r},t.formatters.substract=function(t,r){return 1*t-1*r},t.formatters.multiply=function(t,r){return 1*t*(1*r)},t.formatters.divide=function(t,r){return 1*t/(1*r)},t.formatters.min=function(){return Math.min.apply(Math,arguments)},t.formatters.max=function(){return Math.max.apply(Math,arguments)},t.formatters.isEqual=function(t,r){return t===r},t.formatters.isNotEqual=function(t,r){return t!==r},t.formatters.isLess=function(t,r){return 1*t<1*r},t.formatters.isGreater=function(t,r){return 1*t>1*r},t.formatters.isLessEqual=function(t,r){return 1*t<=1*r},t.formatters.isGreaterEqual=function(t,r){return 1*t>=1*r},t.formatters.or=function(){for(var r=0;r<arguments.length;r++)if(t.formatters.toBoolean(arguments[r]))return!0;return!1},t.formatters.and=function(){for(var r=0;r<arguments.length;r++)if(!t.formatters.toBoolean(arguments[r]))return!1;return!0},t.formatters.negate=function(r){return!t.formatters.toBoolean(r)},t.formatters.if=function(r,e,o){return t.formatters.toBoolean(r)?e:o},t.formatters.numberFormat=function(r,e,o,n){r=t.formatters.isNumber(r)?r:t.formatters.toDecimal(r),t.formatters.isInteger(e)||(e=t.stdlib.defaultPrecision),o||(o=t.stdlib.defaultDecimalSeparator),n||(n=t.stdlib.defaultThousandSeparator);var a=(+(Math.round(+(Math.abs(r)+"e"+e))+"e"+-e)).toFixed(e);return r<0&&(a="-"+a),2==(a=a.split(".")).length?a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n)+o+a[1]:a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n)},t.formatters.date=function(e){return r(e).format(t.stdlib.defaultDateFormat)},t.formatters.time=function(e){return r(e).format(t.stdlib.defaultTimeFormat)},t.formatters.datetime=function(e){return r(e).format(t.stdlib.defaultDatetimeFormat)},t.formatters.toTimestamp=function(t){return r(t).format("X")},t.formatters.toDate=function(t){return r.unix(t).toDate()},t.formatters.toMoment=function(t){return r(t)},t.formatters.dateFormat=function(t,e){return r(t).format(e)},t.formatters.pairs=function(t){return Object.keys(t).map(function(r){return{object:t,property:r,value:t[r]}})},t.formatters.keys=function(t){return Object.keys(t)},t.formatters.values=function(t){return Object.keys(t).map(function(r){return t[r]})},t.formatters.stringFormat=function(t){for(var r=1;r<arguments.length;r++){var e=t.indexOf("%s");if(-1===e)break;t=t.slice(0,e)+arguments[r]+t.slice(e+2)}return t},t.formatters.split=function(t,r){return t.split(r)},t.formatters.lower=function(t){return t.toLowerCase()},t.formatters.upper=function(t){return t.toUpperCase()},t.formatters.capitalize=function(r){return(r=t.formatters.toString(r)).split(" ").map(function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}).join(" ")},t.formatters.contains=function(t,r){return-1!==t.indexOf(r)},t.formatters.doesNotContain=function(r,e){return t.formatters.negate(t.formatters.contains(r,e))},t.formatters.prettyPrint=function(t){return JSON.stringify(t,null,2)},t.formatters.isEmpty=function(r){return!t.formatters.toBoolean(r)||0===t.formatters.toArray(r).length},t.formatters.length=function(r){return t.formatters.isString(r)?r.length:t.formatters.toArray(r).length},t.formatters.join=function(r,e){return t.formatters.toArray(r).join(e)},t.formatters.wrap=function(t){var r=Array.prototype.slice.call(arguments);return r.splice(0,1),function(e){var o=r.slice();return Array.prototype.push.apply(o,Array.prototype.slice.call(arguments)),t.apply(this,o)}},t.formatters.delay=function(t,r){var e=this;return function(){setTimeout(function(){t.apply(e,arguments)},r)}},t.formatters.preventDefault=function(t){var r=this;return function(e){return e.preventDefault(),t.call(r,e),!1}},t.binders.width=function(t,r){t.style.width=r},t.binders.height=function(t,r){t.style.height=r},t.binders.template={block:!0,bind:function(){this.subviews=[]},unbind:function(t){this.subviews.forEach(function(t){t.unbind()})},routine:function(r,e){var o=this;this.subviews.forEach(function(t){t.unbind()}),this.subviews=[],$(r).html(e);this.view.binders,this.view.formatters,this.view.adapters,this.view.config;var n={};for(var a in o.view.models)n[a]=o.view.models[a];$(r).children().each(function(){var r=new t._.View(this,n);r.bind(),o.subviews.push(r)})},update:function(t){this.subviews.forEach(function(r){r.update(t)})}},t.formatters.eq=t.formatters.isEqual,t.formatters.ne=function(r,e){return t.formatters.negate(t.formatters.isEqual(r,e))},t.formatters.lt=t.formatters.isLess,t.formatters.gt=t.formatters.isGreater,t.formatters.le=t.formatters.isLessEqual,t.formatters.lte=t.formatters.isLessEqual,t.formatters.ge=t.formatters.isGreaterEqual,t.formatters.gte=t.formatters.isGreaterEqual,t.formatters.prv=t.formatters.preventDefault,t.formatters.inject=t.formatters.stringFormat,t.formatters.format=t.formatters.dateFormat,t.formatters.len=t.formatters.length,t.formatters.def=t.formatters.default,t.formatters.neg=t.formatters.negate,t.formatters.date=t.formatters.dateFormat,t.formatters.stringify=t.formatters.prettyPrint,t.formatters.int=t.formatters.integer,t.formatters.isLower=t.formatters.isLess,t.formatters.isLowerEqual=t.formatters.isLessEqual});